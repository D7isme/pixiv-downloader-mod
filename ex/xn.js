var AEbnGX=function(){function a(){this.dataBottom=this.dataTop="";this.cnt=0}a.prototype={start:function(c,b){this.dataTop+='<svg xmlns="http://www.w3.org/2000/svg" xmlns:A="http://www.w3.org/1999/xlink" width="'+b+'" height="'+c+'">'},addFrame:function(c,b,d){0==this.cnt?(this.dataTop+='<set A:href="#i'+this.cnt+'" id="f'+this.cnt+'" dur="'+d+'ms" begin="f'+(c-1)+'.end;0s" attributeName="display" to="inline" />',this.dataBottom+='<image id="i'+this.cnt+'" display="inline" A:href="data:image/jpeg;base64,'+
b+'" />'):(this.dataTop+='<set A:href="#i'+this.cnt+'" id="f'+this.cnt+'" dur="'+d+'ms" begin="f'+(this.cnt-1)+'.end" attributeName="display" to="inline" />',this.dataBottom+='<image id="i'+this.cnt+'" display="none" A:href="data:image/jpeg;base64,'+b+'" />');this.cnt++},finish:function(){this.dataBottom+="</svg>";return this.dataTop+this.dataBottom}};return a}(),percent=0,frameCnt=0,delaySum=0,encoder=new AEbnGX;
onmessage=function(a){a=a.data;"start"===a.cmd?encoder.start(a.height,a.width):"frameAdd"===a.cmd?(encoder.addFrame(a.frame,a.imgData,a.delay),postMessage({cmd:"percent",percent:++percent})):"finish"===a.cmd&&(a=encoder.finish(),postMessage({cmd:"finish",svg:a}))};
